{namespace who=WHO\WhoShop\ViewHelpers}
<f:for each="{categories}" as="category">
	test
	<li {f:if(condition: '{category.children}', then: 'class="dropdown"')}>
		<f:if condition="{category.children}">
			<f:then>
				<f:if condition="{category.depth} > 1">
					<f:then>
						<a href="{f:uri.action(action: 'menu', controller: 'Category', arguments: '{category: category}', pageUid: '{settings.listPageUid}')}">{category.title}</a>
					</f:then>
					<f:else>
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">{category.title}<span class="ds-icon-chevron-down"></span></a>
					</f:else>
				</f:if>
			</f:then>
			<f:else>
				<a href="{f:uri.action(action: 'menu', controller: 'Category', arguments: '{category: category}', pageUid: '{settings.listPageUid}')}">{category.title}</a>
			</f:else>
		</f:if>
		<f:if condition="{category.children}">
			<f:if condition="{category.depth} < {settings.maxMenuDepth}">
				<ul class="dropdown-menu" role="menu">
					<f:render partial="Category/MenuItem_0" arguments="{categories: category.children}"/>
				</ul>
			</f:if>
		</f:if>
	</li>
</f:for>