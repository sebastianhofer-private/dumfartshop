function equalHeights(a,b,c){var d=0;return $(a).find(b).height("auto"),$(a).find(b).each(function(){var a=$(this);a.height()>d&&(d=a.height())}),c>0&&(d-=c),$(a).find(b).height(d),!1}function ajaxActionCall(a,b,c,d,e,f){$("#loaderImage-wrapper").css("display","block");var g={tx_whoshop_product:{forwardAction:a,product:e,ordersize:f}};$.ajax({url:b,data:g,success:function(a){switch(c){case"addedToBasket":addedToBasket(a,d);break;case"removedFromBasket":removedFromBasket(a,d);break;case"updatedInBasket":updatedInBasket(a,d,f);break;case"removedFromBasketList":removedFromBasketList(d);break;default:doDefault()}$("#loaderImage-wrapper").css("display","none")},error:function(a){console.log(a)}})}function addedToBasket(a,b){b.removeClass("btn-primary"),b.removeClass("add-to-basket"),b.addClass("btn-danger"),b.addClass("remove-from-basket"),b.text("aus Warenkorb entfernen"),b.data("basket-event","remove"),$(".order-size").css("visibility","hidden")}function removedFromBasket(a,b){b.removeClass("btn-danger"),b.removeClass("remove-from-basket"),b.addClass("btn-primary"),b.addClass("add-to-basket"),b.html('<span class="glyphicon glyphicon-shopping-cart"></span> Warenkorb <span class="glyphicon glyphicon-chevron-right"></span>'),b.data("basket-event","add"),$(".order-size").css("visibility","visible")}function updatedInBasket(a,b,c){var d=b.next("p").data("single-value")*c;b.next("p").text(d.toFixed(2)+" €"),calcSum(),calcTotal()}function removedFromBasketList(a){var b=a.data("parent-element");$("."+b).remove(),calcSum(),calcTotal()}function calcSum(){var a=0,b=0;$(".order-size-basketlist").each(function(){b=$(this).data("single-price")*$(this).val(),a+=b}),$(".basket-sum").text(a.toFixed(2)+" €")}function calcTotal(){var a=0,b=0;$(".order-size-basketlist").each(function(){b=$(this).data("single-price")*$(this).val(),a+=b}),a+=5,$(".basket-total").text(a.toFixed(2)+" €")}function doDefault(){}$(document).ready(function(){equalHeights(".equal-heights",".caption",0),$(window).resize(function(){equalHeights(".equal-heights",".caption",0)}),$(".basket-event").click(function(){var a=$(this).data("product"),b=$(this).data("targeturl"),c=$(this).data("basket-event");"remove"==c?ajaxActionCall("removeFromBasket",b,"removedFromBasket",$(this),a,0):"add"==c?ajaxActionCall("addToBasket",b,"addedToBasket",$(this),a,$(this).data("order-size")):"removeBasket"==c&&ajaxActionCall("removeFromBasket",b,"removedFromBasketList",$(this),a,0)}),$("#order-size-single").change(function(){$(".basket-event").data("order-size",$(this).value())}),$(".order-size-basketlist").change(function(){var a=$(this).data("product"),b=$(this).data("targeturl");ajaxActionCall("updateOrderSize",b,"updatedInBasket",$(this),a,$(this).val())})});